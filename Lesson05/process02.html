<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title>Lesson05 - 02 | 立方体の作成</title>
  <style>
    body { margin: 0; overflow: hidden; }
  </style>
</head>
<body>
  <!-- canvas要素を用意 -->
  <canvas id="canvas"></canvas>
  <!-- Three.js をCDNから読み込む -->
  <script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.164.0/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.164.0/examples/jsm/"
    }
  }
  </script>
  <!-- モジュール版のスクリプトを記述していく -->
  <script type="module">
    // Three.js のグローバル名前空間を "THREE" としてインポート
    import * as THREE from 'three';

    // 1.レンダラーを作成
    // キャンバスと画面サイズを取得
    const canvas = document.getElementById('canvas');
    let width = window.innerWidth;
    let height = window.innerHeight;
    // レンダラーを作成し、サイズを指定
    const renderer = new THREE.WebGLRenderer({ canvas: canvas });
    renderer.setSize(width, height);

    // 2.シーンを作成
    const scene = new THREE.Scene();

    // 3.カメラを作成
    const camera = new THREE.PerspectiveCamera(60, width / height, 1, 1000);
    camera.position.set(0, 20, -100); // 後ろに下がって少し上 (水平線を視野に入れる)
    camera.lookAt(0, 0, 0); // 原点方向を見る

    // 4.光源を作成
    const light = new THREE.SpotLight(0xffffff, 10, 1000, Math.PI / 3, 0, 0);
    light.position.set(-20, 100, 0); // 原点のやや左上
    scene.add(light); // シーンに追加
    
    // 5.地面を作成
    const groundGeo = new THREE.PlaneGeometry(1000, 1000); // 地面の「形状」
    const groundMat = new THREE.MeshStandardMaterial({ color: 0x442211 }); // 地面の「質感」
    const ground = new THREE.Mesh(groundGeo, groundMat); // 地面の「メッシュ(形状+質感)」
    ground.rotation.x = - Math.PI / 2; // 水平に倒す
    scene.add(ground); // シーンに追加

    // 6.立方体を配置してみる
    const cubeGeo = new THREE.BoxGeometry(10, 10, 10); // 立方体の「形状」
    const cubeMat = new THREE.MeshStandardMaterial({ color: 0x00ff88 }); // 立方体の「質感」
    const cube = new THREE.Mesh(cubeGeo, cubeMat); // 立方体の「メッシュ(形状+質感)」
    cube.position.set(0, 10, 0); // 地面の少し上を浮遊
    scene.add(cube); // シーンに追加

    // 7.立方体をアニメーションさせてみる

    // レンダリング開始
    renderer.render(scene, camera);

  </script>
</body>
</html>
